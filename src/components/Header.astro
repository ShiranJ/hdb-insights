---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE } from '../consts';
---

<header class="sticky top-0 z-50 bg-hdb-bg-card/95 backdrop-blur-sm border-b border-hdb-border">
	<div class="container">
		<nav class="flex items-center justify-between py-4">
			<!-- Logo -->
			<div class="flex items-center">
				<a href="/" class="text-xl font-bold text-hdb-text hover:text-hdb-primary transition-colors">
					üè† {SITE_TITLE}
				</a>
			</div>

			<!-- Desktop Navigation -->
			<div class="hidden md:flex items-center space-x-1">
				<HeaderLink href="/">Home</HeaderLink>
				<HeaderLink href="/compare">Compare</HeaderLink>
				<HeaderLink href="/calculator">Calculator</HeaderLink>
				<HeaderLink href="/trends">Trends</HeaderLink>
				<HeaderLink href="/blog">Blog</HeaderLink>
			</div>

			<!-- Social Links (Desktop) -->
			<div class="hidden lg:flex items-center space-x-3">
				<a
					href="https://github.com/ShiranJ/hdb-insights"
					target="_blank"
					rel="noopener noreferrer"
					class="text-hdb-text-muted hover:text-hdb-primary transition-colors p-2 rounded-lg hover:bg-hdb-bg-elevated"
					aria-label="View HDB Insights on GitHub"
				>
					<svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
						<path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
					</svg>
				</a>
				<a
					href="https://data.gov.sg"
					target="_blank"
					rel="noopener noreferrer"
					class="text-hdb-text-muted hover:text-hdb-primary transition-colors p-2 rounded-lg hover:bg-hdb-bg-elevated"
					aria-label="Visit Singapore Government Data Portal"
				>
					<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
						<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"/>
					</svg>
				</a>
			</div>

			<!-- Mobile Menu Button -->
			<button
				id="mobile-menu-button"
				class="md:hidden p-2 rounded-lg hover:bg-hdb-bg-elevated transition-colors"
				aria-label="Toggle mobile menu"
				aria-expanded="false"
			>
				<div class="hamburger-menu">
					<span class="hamburger-line hamburger-line-1"></span>
					<span class="hamburger-line hamburger-line-2"></span>
					<span class="hamburger-line hamburger-line-3"></span>
				</div>
			</button>
		</nav>

		<!-- Mobile Menu -->
		<div id="mobile-menu" class="hidden md:hidden">
			<div class="py-4 space-y-2 border-t border-hdb-border">
				<a href="/" class="nav-link-mobile">Home</a>
				<a href="/compare" class="nav-link-mobile">Compare</a>
				<a href="/calculator" class="nav-link-mobile">Calculator</a>
				<a href="/trends" class="nav-link-mobile">Trends</a>
				<a href="/blog" class="nav-link-mobile">Blog</a>
			</div>
			<div class="py-4 border-t border-hdb-border">
				<div class="flex justify-center space-x-4">
					<a
						href="https://github.com/ShiranJ/hdb-insights"
						target="_blank"
						rel="noopener noreferrer"
						class="text-hdb-text-muted hover:text-hdb-primary transition-colors p-3"
						aria-label="View HDB Insights on GitHub"
					>
						<svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
							<path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
						</svg>
					</a>
					<a
						href="https://data.gov.sg"
						target="_blank"
						rel="noopener noreferrer"
						class="text-hdb-text-muted hover:text-hdb-primary transition-colors p-3"
						aria-label="Visit Singapore Government Data Portal"
					>
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" aria-hidden="true">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"/>
						</svg>
					</a>
				</div>
			</div>
		</div>
	</div>
</header>

<style>
	/* Hamburger menu animation */
	.hamburger-menu {
		display: flex;
		flex-direction: column;
		justify-content: space-between;
		width: 24px;
		height: 18px;
	}

	/* Mobile menu link styles */
	.nav-link-mobile {
		display: block;
		padding: 0.75rem 1rem;
		color: var(--hdb-text);
		text-decoration: none;
		font-weight: 500;
		border-radius: 0.5rem;
		transition: all 0.2s ease;
		margin: 0 -1rem;
	}

	.nav-link-mobile:hover {
		background-color: var(--hdb-bg-elevated);
		color: var(--hdb-primary);
	}
</style>

<script>
	document.addEventListener('DOMContentLoaded', () => {
		const mobileMenuButton = document.getElementById('mobile-menu-button');
		const mobileMenu = document.getElementById('mobile-menu');
		const hamburgerMenu = mobileMenuButton?.querySelector('.hamburger-menu');

		if (mobileMenuButton && mobileMenu && hamburgerMenu) {
			mobileMenuButton.addEventListener('click', () => {
				const isExpanded = mobileMenuButton.getAttribute('aria-expanded') === 'true';

				// Toggle menu visibility
				mobileMenu.classList.toggle('hidden');

				// Update aria-expanded
				mobileMenuButton.setAttribute('aria-expanded', (!isExpanded).toString());

				// Toggle hamburger animation
				hamburgerMenu.classList.toggle('hamburger-active');
			});

			// Close menu when clicking outside
			document.addEventListener('click', (event) => {
				if (!mobileMenuButton.contains(event.target) && !mobileMenu.contains(event.target)) {
					mobileMenu.classList.add('hidden');
					mobileMenuButton.setAttribute('aria-expanded', 'false');
					hamburgerMenu.classList.remove('hamburger-active');
				}
			});

			// Close menu when clicking on a link
			mobileMenu.addEventListener('click', (event) => {
				if (event.target.tagName === 'A') {
					mobileMenu.classList.add('hidden');
					mobileMenuButton.setAttribute('aria-expanded', 'false');
					hamburgerMenu.classList.remove('hamburger-active');
				}
			});
		}
	});
</script>
